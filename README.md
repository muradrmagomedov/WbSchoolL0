<p align="center">
    <div align="center">
        <h1>Test Service</h1>
    </div>
</p>

**Описание проекта:**  
Проект Test Service — тестовый сервис, имитирующий работу с заказами.

## Архитектура

Проект разработан с учетом клиент-серверной архитектуты.

- **Клиент:** в качестве клиента используется веб-браузер
- **Бекенд:** сервисы Kafka, PostgreSQL, Redis. Взаимодействие с клиентом осуществляется по принципам REST-API

## Стек технологий

- Redis - для кэширования сообщений с целью ускорения обработки однотипных запросов
- Kafka - для передачи сообщений из других сервисов в базу данных и повышения отказоустойчивости системы
- PostrgreSQL - в качестве основной базы данных
- Gin Gonic - для создания REST-API взаимодействия между клиентом и сервером
- Docker - для быстрого поднятия сервисов

## Разворачивание сервисов

Для автоматического подъема контейнеров используйте команду:

```
docker-compose up -d
```

После подъема PostgreSQL необходимо выполнить команду для создания базы данных:

```
make migrateup
```

## Запуск проекта

Запуск проекта осуществляется командой:

```
make run
```

После запуска проекта клиент для отправки запросов будет доступен по адресу:
`http://localhost:8001`

## Дополнительные UI для сервисов:

- Redis Insight (просмотр Redis): `http://localhost:5540`
- Kowl (просмотр сообщений Kafka): `http://localhost:8080`

## Описание пакетов:

- cmd/app: package main
  Содержит исполняемый файл main.go, а так же файлы config.go, который загружает конфигурации для сервисов из файла config.yaml и файл shutdown.go реализующий graceful Shutdown

- consumer: package consumer
  Читает сообщения из Kafka и записывает их в PostgreSQL

- producer: package producer
  Генерирует сообщения и передает их в Kafka

- server: package server
  Роутер для реализации REST-API взаимодействия с клиентом.
  Прием и обработка POST-запросов с веб-клиента

- storage/postgresql: package postgresql
  Методы работы с PostgreSQL (запись новых заказов, получение заказов по order_id)

- storage/redis: package redis
  Методы работы с Redis (добавление записей в кэш)
